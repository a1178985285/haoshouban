<!-- 签约 -->
<template>
  <div class="Signing-container">
    <div class="Signing-title">
      <h1 class="Signing-title-text" style="font-weight:700;">业务分包服务合作协议</h1>
    </div>
    <div class="ParagraphHorizontalLine">
      <div class="line"></div>
    </div>
    <div class="Signing-message">
      <p>欢迎您与我司签署本协议并为宏智君诚（北京）科技有限公司的合作方提供服务。</p>
      <p></p>
      <p>为维护您的自身权益，在您签署本协议之前，请认真阅读本协议，务必审慎阅读、充分理解各条款内容，特别是权利义务条款、法律适用和管辖条款。上述条款以粗体及下划线标识，您应重点阅读。</p>
      <p>
        <span class="Signing-text-color">【签约】</span>当您通过网络页面点击或以其他形式确认本协议的，即视为您已充分理解本协议所有条款；已充分阅读、理解并接受本协议的全部内容，并与我司达成一致意见并成为我司的分包合作人员，此后您不得以未阅读/不理解本协议内容或类似言辞做任何形式的抗辩。本协议签约的有效方式包括电子签约
      </p>
      <p>
        <span class="Signing-text-color">【合作关系】</span>您与我司通过本协议建立业务分包合作关系，适用《合同法》、民法和其他民事法律。
        协议条款：
        根据国家法律有关规定，双方按照平等自愿、诚实信用的原则，就我司选择用您为我司服务合作方提供服务工作事宜订立本协议。
      </p>
      <div class="Signing-ordinance">
        <div class="Signing-ordinance-title" style="font-weight:700;">
          <p>第一条 服务工作内容</p>
        </div>
        <div class="Signing-ordinance-message">
          <p>
            1.1 因我司与合作方服务合作提供服务需要，特选用您提供/完成相关服务，该等服务的内容主要为您根据我司与合作方相关合同的规定提供相关的框架服务。
            1.2 您应按照我司合作方相关合同要求规定的标准完成服务分包任务。
          </p>
        </div>
      </div>
      <div class="Signing-ordinance">
        <div class="Signing-ordinance-title" style="font-weight:700;">
          <p>第二条 协议效力</p>
        </div>
        <div class="Signing-ordinance-message">
          <p>
            2.1您承诺并保证您所提供的签约信息真实、准确，以免影响您和我司之间的《服务合作协议》效力。本协议条款您签署之日起生效。
            2.2 本协议有效期限至［ {{year}} ］年［ {{mounth}}  ］月［ {{day}} ］日。期限届满，双方应另行签署新的协议；若双方未签署新的协议，而以实际行动继续合作的，视为双方同意协议期限顺延直至按照本协议约定终止或解除时为止。
            2.3 本协议在发生下列情形时自然终止：
            a、 经合作方事先同意的情况下，您主动退出服务的；
            b、 我司与合作方终止或变更业务模式而不需要您继续履行本协议的；
            c、 我司或合作方认为您不适合继续提供服务的；
            d、 我司和合作方解除合作的；
            e、 其他原因导致本协议不再继续履行的。
          </p>
        </div>
      </div>
      <div class="Signing-ordinance">
        <div class="Signing-ordinance-title" style="font-weight:700;">
          <p>第三条 我司的权利和义务</p>
        </div>
        <div class="Signing-ordinance-message">
          <p>
            3.1 您应根据我司的安排和合作方的要求完成相关的服务，服务期间您应遵守相关的服务规则，遵守相关的法律法规政策规定。
            3.2 我司和合作方将对您在分包服务成果进行验收。
            3.3 我司应按约定及时向您支付费用。此处您应明确：您作为我司的合作人员，在合作方依约向我司支付合作款项前提下，您的相关费用结算将由我司及委托公司完成支付。
          </p>
        </div>
      </div>
      <div class="Signing-ordinance">
        <div class="Signing-ordinance-title" style="font-weight:700;">
          <p>第四条 您的权利和义务</p>
        </div>
        <div class="Signing-ordinance-message">
          <p>
            4.1 您应按时尽责地完成我司以及合作方要求的服务内容，并达到规定的质量标准，不得有侵犯他人合法权益。
            4.2 协议期内，您应在我司以及合作方许可范围内使用相关的商业信息；协议期内以及协议终止后，您均有义务对双方合作的有关协议及合作过程中知悉的我司、合作方相关信息予以保密，未经书面许可，您不得以任何方式向其它方泄漏、给予或转让该等保密信息。否则，因此导致我司及合作方的损失，由您负责赔偿。
            4.3 除本协议事项外，您不能以我司及/或合作方名义开展任何与完成约定的服务无关的业务或活动。
          </p>
        </div>
      </div>
      <div class="Signing-ordinance">
        <div class="Signing-ordinance-title" style="font-weight:700;">
          <p>第六条 违约责任</p>
        </div>
        <div class="Signing-ordinance-message">
          <p>
            6.1 双方应按本协议约定履行，如有违反，守约方有权要求对方及时改正；造成对方损失的，守约方有权要求违约方赔偿。
            6.2 因不可抗力造成损失的，彼此不负赔偿责任，但发生不可抗力一方应及时将有关情况通知另一方，并尽最大努力进行补救。本协议所称不可抗力是指不能预见、不能克服并不能避免且对一方当事人造成重大影响的客观事件，包括但不限于自然灾害如洪水、地震、火灾和风暴等以及社会事件如战争、动乱、政府行为、黑客事件、大范围电信事故等。
          </p>
        </div>
      </div>
      <div class="Signing-ordinance">
        <div class="Signing-ordinance-title" style="font-weight:700;">
          <p>第七条 协议的终止</p>
        </div>
        <div class="Signing-ordinance-message">
          <p>
            7.1 发生以下情形时，本协议终止：
            a. 协议期限届满或任何一方提前30日书面通知对方要求终止协议的；
            b. 一方违反协议约定，且违约方在非违约方书面通知后15日内仍未予改正的，非违约方可以书面通知的形式终止本协议；
            c. 您如未能达到我司及合作方的要求，我司在工作验收时将给予警告；此后如仍发生类似情况的，我司可提前终止本协议，如您的不良行为导致我司或合作方发生损失、赔偿责任等，您将承担因此产生的一切责任。
            7.2 本协议的提前终止不影响已经产生的权利义务关系。
          </p>
        </div>
      </div>
      <div class="Signing-ordinance">
        <div class="Signing-ordinance-title" style="font-weight:700;">
          <p>第八条 其他</p>
        </div>
        <div class="Signing-ordinance-message">
          <p>
            8.1 因履行本协议发生的纠纷，双方应友好协商解决，协商不成的，应向协议签订地人民法院诉讼解决。
            8.2 我司有权根据业务需要修改本协议条款
          </p>
        </div>
      </div>
    </div>
    <div class="Sign-consent">
      <p>签字同意:</p>
    </div>

    <div>
      <canvas
        class="firstCanvas"
        canvas-id="firstCanvas"
        @touchmove="move"
        @touchend="end"
        @error="error"
        disable-scroll="true"
      ></canvas>
      <div class="operate-btn">
        <div class="button" @click="clearClick">清除</div>
      </div>
    </div>
    <div class="Sign-button">
      <div class="Sign-agree-button" @click="Agree()">
        <p>签约</p>
      </div>
      <div class="Sign-disagree-button" @click="Disagree()">
        <p>拒绝</p>
      </div>
    </div>
  </div>
</template>

<script>
let content = null
let touchs = []
let canvasw = 0
let canvash = 0
wx.getSystemInfo({
  success: function(res) {
    canvasw = res.windowWidth
    canvash = canvasw * 9 / 16
  }
})
export default {
  data() {
    return {
      signImage: '',
      year:'',
      mounth:'',
      day:''
    }
  },
  onShow() {
    content = wx.createCanvasContext('firstCanvas', this)
    content.setStrokeStyle('#000000')
    content.setLineWidth(5)
    content.setLineCap('round')
    content.setLineJoin('round')
    const date = new Date()
    console.log(date);
    this.year = date.getFullYear() + 2
    this.mounth = date.getMonth() + 1
    this.day = date.getDate()
  },
  methods: {
    error(e) {
      wx.showModal({
        title: 'yes11'
      })
    },
    move(e) {
      let point = { x: e.touches[0].x, y: e.touches[0].y }
      touchs.push(point)
      if (touchs.length >= 2) {
        this.draw(touchs)
      }
    },
    end(e) {
      for (let i = 0; i < touchs.length; i++) {
        touchs.pop()
      }
    },
    clearClick() {
      content.clearRect(0, 0, canvasw, 500)
      content.draw(true)
    },
    saveClick() {
      let that = this
      wx.canvasToTempFilePath(
        {
          canvasId: 'firstCanvas',
          success: function(res) {
            that.signImage = res.tempFilePath
            that.$emit('success', that.signImage)
          }
        },
        this
      )
    },
    draw(touchs) {
      let point1 = touchs[0]
      let point2 = touchs[1]
      touchs.shift()
      content.moveTo(point1.x, point1.y)
      content.lineTo(point2.x, point2.y)
      content.stroke()
      content.draw(true)
    },
    Disagree() {
      console.log(2)
      wx.navigateBack({
        delta: 1
      })
    },
    Agree() {
      wx.navigateTo({
        url: '../UploadIDCardPhoto/main'
      })
    }
  }
}
</script>

<style>
.Signing-container {
  text-align: justify;
}
.Signing-title {
  width: 750rpx;
  height: 52rpx;

  margin-top: 30rpx;
}
.Signing-title-text {
  display: inline-block;
  margin-left: 200rpx;
  font-size: 36rpx;
  color: #101010;
  font-family: PingFangSC-regular;
}
.Signing-message {
  width: 690rpx;
  height: auto;

  margin-left: 30rpx;
  font-size: 28rpx;
  color: #888888;
  font-family: PingFangSC-regular;
}
.ParagraphHorizontalLine {
  width: 688rpx;
  height: 40rpx;
  margin-left: 30rpx;

  margin-top: 10rpx;
}
.line {
  width: 100%;
  height: 2rpx;
  margin-top: 20rpx;
  background: #dedede;
}
.Signing-text-color {
  color: #000000;
}
.Signing-ordinance {
  width: 688rpx;
  height: auto;

  margin-top: 80rpx;
}
.Signing-ordinance-title {
  width: 688rpx;
  height: 30rpx;
  font-size: 28rpx;
  color: #000000;
}
.Signing-ordinance-message {
  margin-top: 80rpx;
  font-size: 28rpx;
}
.Sign-consent {
  width: 688rpx;
  height: 94rpx;
  margin-top: 34rpx;
  margin-left: 24rpx;
  font-size: 30rpx;
}
.Sign-button {
  width: 750rpx;
  height: 80rpx;
  display: flex;
  margin-top: 96rpx;
  margin: 96rpx auto 164rpx;
}
.Sign-agree-button {
  width: 326rpx;
  height: 80rpx;
  margin-left: 30rpx;

  line-height: 80rpx;
  color: #ffffff;

  background-color: #f15e3e;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0);
}
.Sign-disagree-button {
  width: 326rpx;
  height: 80rpx;
  margin-left: 30rpx;
  line-height: 80rpx;
  color: #ffffff;

  background-color: #febd00;
  text-align: center;
  border: 1px solid rgba(255, 255, 255, 0);
}
.firstCanvas {
  width: 100%;
  height: 500rpx;
}
.operate-btn {
  display: flex;
  flex-direction: row;
  align-items: center;
  justify-content: center;
}
.button {
  flex: 1;
  height: 80rpx;
  line-height: 80rpx;
  font-size: 30rpx;
  text-align: center;
  color: deepskyblue;
  border-radius: 0;
  background-color: #fff;
  border-top: 1px solid #ddd;
  outline: none;
}
.button:first-of-type {
  border-right: 1px solid #ddd;
}
.button:last-of-type {
  border-left: 1px solid #ddd;
}
</style>